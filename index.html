<!-- ... (bagian sebelumnya) ... -->

<script>
  const API_KEY = 'da2-e3ybp4cw2vgdlgmie3byhf4ohe';
  const GRAPHQL_URL = 'https://xzqpphzvbzhzvpke6ojjzvbpjq.appsync-api.ap-southeast-1.amazonaws.com/graphql';
  const channelId = '4c93270c-8537-4b2c-b46c-6b0075260dcc';

  const graphqlQuery = `
    query MessagesByChannelId {
      messagesByChannelId(channelId: "${channelId}", sortDirection: DESC, limit: 2000) {
        items {
          id
          message
          channelId
          createdAt
          updatedAt
          userMessagesId
          type
          author {
            givenName
            familyName
            nickname
            profileImage
          }
        }
      }
    }
  `;

  // ... (fungsi formatMessage dan fetchData yang sudah ada) ...

  fetchData(); // Pemanggilan fetchData setelah definisi
</script>

<script>
  const fetchDataToVercel = async () => {
    try {
      // ... (kode yang sudah ada) ...

      // Kirim data ke fungsi serverless di Vercel
      await fetch('https://tesbot-eight.vercel.app/discord-handler.js', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ messages }),
      });

      console.log('Data dikirim ke Vercel.');
    } catch (error) {
      console.error('Error mengambil data:', error);
    }
  };

  fetchDataToVercel(); // Pemanggilan fetchDataToVercel setelah definisi
</script>
</body>
</html>
